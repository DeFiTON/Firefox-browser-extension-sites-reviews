
## Инструкция по созданию WebExtension для Firefox

### Введение

В этой статье мы рассмотрим процесс создания WebExtension для Firefox, который добавляет красную рамку ко всем страницам, загруженным с "mozilla.org" или его поддоменов.

Исходный код этого дополнения доступен на GitHub: [Ссылка на GitHub](https://github.com/mdn/webextensions-examples/tree/master/borderify).

Для начала работы вам потребуется Firefox версии 45 или более поздней.

### 1. Написание WebExtension

1. Создайте новую директорию (папку) `borderify`:

```bash
mkdir borderify
cd borderify
```

2. Создайте новый файл с именем `manifest.json` в директории `borderify` и добавьте следующий код:

```json
{
  "manifest_version": 2,
  "name": "Borderify",
  "version": "1.0",
  "description": "Adds a solid red border to all webpages matching mozilla.org.",
  "icons": {
    "48": "icons/border-48.png"
  },
  "applications": {
    "gecko": {
      "id": "borderify@mozilla.org",
      "strict_min_version": "45.0"
    }
  },
  "content_scripts": [
    {
      "matches": ["*://*.mozilla.org/*"],
      "js": ["borderify.js"]
    }
  ]
}
```

### 2. Описание ключей в manifest.json

- `manifest_version`, `name` и `version` содержат основные метаданные о дополнении.
- `description` - необязательное поле, содержит описание расширения.
- `icons` - указывает на иконку для дополнения.
- `applications` - определяет ID расширения и минимальную поддерживаемую версию Firefox.
- `content_scripts` - определяет на каких страницах будет работать ваше расширение.

### 3. Добавление иконки расширению

#### 3.1 Подготовка иконки

1. Создайте директорию (папку) `icons` внутри `borderify`.
2. Сохраните в ней иконку под именем `border-48.png`. Иконка будет показана в списке дополнений в Менеджере Дополнений Firefox.

#### 3.2 Использование собственных иконок

- Размер вашей иконки должен быть 48x48 пикселей.
- Для экранов высокого разрешения можете добавить иконку размером 96x96 пикселей и указать её в `manifest.json`:

```json
"icons": {
  "48": "icons/border-48.png",
  "96": "icons/border-96.png"
}
```

- Вы также можете использовать иконку в формате SVG для автоматического масштабирования.

### 4. Создание скрипта расширения

1. В директории `borderify` создайте файл `borderify.js`.
2. Добавьте следующий код:

```js
document.body.style.border = "5px solid red";
```

Этот код будет встраиваться в страницу, которая совпадает с шаблоном, указанным в ключе `content_scripts` файла `manifest.json`.

### 5. Тестирование расширения

#### 5.1 Установка расширения в Firefox

1. Откройте Firefox и перейдите по адресу `about:debugging`.
2. Нажмите "Load Temporary Add-on" и выберите файл `manifest.json`.
3. Перейдите на `about:addons` и вы увидите своё дополнение в списке установленных.

#### 5.2 Тестирование функциональности

1. Посетите любую страницу домена "mozilla.org" и убедитесь, что видите красную рамку вокруг страницы.

### 6. Упаковка расширения

1. Убедитесь, что в ZIP-архиве находятся только необходимые файлы, исключая директорию `borderify`.
2. Для создания архива откройте командную строку, перейдите в директорию `borderify` и выполните:

```bash
zip -r ../borderify.xpi *
```

Важно: начиная с Firefox 43, все дополнения должны быть подписаны перед установкой. В Firefox Developer Edition или Firefox Nightly можно временно обойти это требование.

### Заключение

Следуя этой инструкции, вы сможете создать, протестировать и подготовить к публикации ваше WebExtension для Firefox. Не забудьте поддерживать свое расширение обновленным и следить за изменениями в API WebExtensions. Удачной разработки!
